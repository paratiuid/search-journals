{"version":3,"sources":["main.js"],"names":["isOldIE","$","is","Portal","IsMobile","IsTablet","Init","document","width","tooltip","on","e","preventDefault","t","this","d","data","removeClass","slideUp","addClass","slideDown","url","escape","href","links","go2","window","open","modal","rel","hide","find","val","cmd","split","fadeIn","each","container","itens","wrapper","prev","next","itemProps","w","eq","outerWidth","h","outerHeight","wrapperWidth","length","containerWidth","height","css","parseInt","animate","left","show","menu","html","headerHeight","y","scrollY","pageYOffset","documentElement","scrollTop","stop","top","idx","info","fadeOut","ctt","attr","replace","p","offset","obj","click","focus","select","clipboardData","setData","text","mouseup","searchFormBuilder","SearchHistory","LanguageFilterCheckedBuffer","SubjectAreasFilterCheckedBuffer","lang","language","value","Cookie","Get","historyQuery","trim","expr","connector","searchQuery","i","l","v","ci","b","where","undefined","initial_filter_in","type","name","appendTo","search_by_year","pub_year_start","pub_year_end","form_action","searchForm","action","form_params","get_result_total","total","send_query_to_history","updateHistoryPage","submit","history_number","manipulate_bookmark","TextareaAutoHeight","trigger","ClearPrevInput","keyCode","aot","searchActionsStart","InsertNewFieldRow","ot","dv","prop","parent","chd","showAll","pt","txtToggle","txt","removeProp","selCount","values","checked","console","log","selAll","tvalue","tid","cluster_id","substr","lastIndexOf","tall_option","field","sort_items","group","ti","arr","isNaN","push","remove","sort","a","toString","localeCompare","append","LanguageFilterInit","SubjectAreaFilterInit","filter_id","filter_label","mod","modContainer","modTitle","modal_filter_id","toRemoveFields","filter_all","empty","select_form","ajax","serialize","beforeSend","STATIC_URL","success","response","off","counter","btn","complete","FilterModalContentConfig","FilterModalEnableDisableButtons","FilterModalConfig","selection","rtn","Validator","MultipleEmails","InsertSearchHistoryItem","$item","s","q","effect","to","PlaceCaretToEnd","getElementById","title","citationContainer","downloadContainer","citation","citationCtt","download","downloadCtt","form","inArray","ctrlKey","shiftKey","contextHelper","cl","ht","hasClass","setTimeout","scroll","ShowCloseSelectedItemsBarMobile","param","$ctt","shItem","matrix","clone","c","EraseFieldRow","SearchHistoryFocusIn","SearchHistoryFocusOut","scrollHeight","CountCheckedResults","r","pos","SearchHistoryClick","indexOf","el","getSelection","createRange","range","selectNodeContents","collapse","sel","removeAllRanges","addRange","body","createTextRange","textRange","moveToElementText","change","when","get_languages_checked","done","languagesChecked","elementID","translations","get_language_filter_translations","mainLanguageTitle","mainLanguageSelectPlaceholder","addSecondLanguageRowText","add_languages_checked","selectize","setValue","get_subject_area_filter_translations","mainThematicTitle","mainSubjectAreaSelectPlaceholder","addSecondSubjectAreaRowText","get_subject_areas_checked","subjectAreasChecked","add_subject_areas_checked","anySelected","Article","TopBinder","articleText","articleTextP","articleMenuW","className","join","ico","ref","tw","ArticleStructureBuilder","ArticleStructureSelect","downloadOpt","downloadOptW","structure","content","iidx","ooffset","delimiter","filter","error","aEmails","test","cookieName","path","cookie","c_start","c_end","unescape","substring","Set","days","expires","date","Date","setTime","getTime","toGMTString","add_second_language_row","time","uniq","Math","floor","random","id","secondaryLanguageSelectId","filter_boolean_operator","filterBooleanOperatorId","filterBooleanOperatorValue","index","element","mainLanguageSelect","clonedName","clonedOptions","Object","options","optionsHTML","items","remove_second_language_row","add_second_subject_area_row","secondarySubjectAreaSelectId","mainSubjectAreaSelect","remove_second_subject_area_row","subjectArea","callback","ul","children","button","ulOffset","spaceUp","spaceDown","keyup","event","new_page","go_to_page","chartSource","lista","regex","cluster_selected","clusterSelection","getElementsByTagName","cluster","innerHTML","clusterLabel","ma","exec","clusterTotal","csvLink","SEARCH_URL","encodeURI","createElement","key","setAttribute","input_label","input_data","appendChild","chartType","any_selected","charttype","chartsource","params","chartBlock","chartDataUrl","canvas","get","G_vmlCanvasManager","initElement","ctx","getContext","clearRect","dataType","graph","Chart","Doughnut","scaleGridLineWidth","Bar","Line","Pie","clear","destroy","selection_count","issn","publisher","collection","journal_title","modal_body","modal_footer","h5_serie","series","h5_last","m5_serie","m5_last","year_list","xAxis","categories","last_year","ownURL"],"mappings":"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","file":"main.js","sourcesContent":["var isOldIE = $(\"html\").is(\".lt-ie9\");\nvar Portal = {\n\t\n\tIsMobile: false,\n\tIsTablet: false,\n\n\tInit: function() {\n\n\t\t/* Starts checking if it is mobile */\n\t\tif($(document).width() < 767) Portal.IsMobile = true \n\t\telse Portal.IsMobile = false;\n\n\t\tif(!Portal.IsMobile && $(document).width() < 992) Portal.IsTablet = true;\n\t\telse  Portal.IsTablet = false;\n\t\t/*  Ends verification if it is mobile */\n\n\n\t\t$(\".showTooltip\").tooltip();\n\n\t\t$(\".mainNav .menu\").on(\"click\",function(e) {\n\t\t\te.preventDefault();\n\n\t\t\tvar t = $(this),\n\t\t\t\td = t.data(\"rel\");\n\n\t\t\td = $(d,\".mainNav\");\n\n\t\t\tif(d.is(\":visible\")) {\n\t\t\t\tt.removeClass(\"opened\");\n\t\t\t\td.slideUp(\"fast\");\n\t\t\t} else {\n\t\t\t\tt.addClass(\"opened\");\n\t\t\t\td.slideDown(\"fast\");\n\t\t\t}\n\t\t});\n\n\t\t$(\".shareFacebook,.shareTwitter,.shareDelicious,.shareGooglePlus,.shareLinkedIn,.shareReddit,.shareStambleUpon,.shareCiteULike,.shareMendeley\").on(\"click\",function(e) {\n\t\t\te.preventDefault();\n\n\t\t\tvar url = escape(this.href),\n\t\t\t\tlinks = {\n\t\t\t\t\t\"facebook\": \"https://www.facebook.com/sharer/sharer.php?u=\",\n\t\t\t\t\t\"twitter\": \"https://twitter.com/intent/tweet?text=\",\n\t\t\t\t\t\"delicious\": \"https://delicious.com/save?url=\",\n\t\t\t\t\t\"googleplus\": \"https://plus.google.com/share?url=\",\n\t\t\t\t\t\"linkedin\": \"http://www.linkedin.com/shareArticle?mini=true&url=\",\n\t\t\t\t\t\"reddit\": \"http://www.reddit.com/submit?url=\",\n\t\t\t\t\t\"stambleupon\": \"http://www.stumbleupon.com/submit?url=\",\n\t\t\t\t\t\"citeulike\": \"http://www.citeulike.org/posturl?url=\",\n\t\t\t\t\t\"mendeley\": \"http://www.mendeley.com/import/?url=\"\n\t\t\t\t},\n\t\t\t\tgo2 = \"\";\n\t\t\tif($(this).is(\".shareFacebook\"))\n\t\t\t\tgo2 = links.facebook + url;\n\t\t\telse if($(this).is(\".shareTwitter\"))\n\t\t\t\tgo2 = links.twitter + url;\n\t\t\telse if($(this).is(\".shareDelicious\"))\n\t\t\t\tgo2 = links.delicious + url;\n\t\t\telse if($(this).is(\".shareGooglePlus\"))\n\t\t\t\tgo2 = links.googleplus + url;\n\t\t\telse if($(this).is(\".shareLinkedIn\"))\n\t\t\t\tgo2 = links.linkedin + url;\n\t\t\telse if($(this).is(\".shareReddit\"))\n\t\t\t\tgo2 = links.reddit + url;\n\t\t\telse if($(this).is(\".shareStambleUpon\"))\n\t\t\t\tgo2 = links.stambleupon + url;\n\t\t\telse if($(this).is(\".shareCiteULike\"))\n\t\t\t\tgo2 = links.citeulike + url;\n\t\t\telse if($(this).is(\".shareMendeley\"))\n\t\t\t\tgo2 = links.mendeley + url;\n\n\t\t\twindow.open(go2,'share');\n\t\t});\n\n\t\t$(\".sendViaMail\").on(\"click\",function(e) {\n\t\t\te.preventDefault();\n\t\t\t$(\"#SendViaEmail\").modal(\"show\");\n\t\t});\n\n\t\t$(\".showBlock\").on(\"click\",function() {\n\t\t\tvar t = $(this),\n\t\t\t\trel = t.data(\"rel\"),\n\t\t\t\thide = t.data(\"hide\");\n\n\t\t\t$(rel).find(\"input:text,textarea\").val(\"\");\n\t\t\t$(rel).slideDown(\"fast\");\n\t\t\t$(hide).hide();\n\t\t});\n\n\t\t$(\".showFloatInfo\").on(\"click\",function() {\n\t\t\tvar cmd = $(this).data(\"rel\");\n\t\t\tcmd = cmd.split(\";\");\n\n\t\t\t$(\"a\",cmd[0]).removeClass(\"selected\");\n\t\t\t$(cmd[2]).hide();\n\n\t\t\tif(cmd[1] != \"null\") {\n\t\t\t\t$(this).addClass(\"selected\");\n\t\t\t\t$(cmd[1]).fadeIn(\"fast\");\n\t\t\t}\n\t\t});\n\n\t\t$(\".slider\").each(function() {\n\t\t\tvar container = $(this);\n\t\t\t\titens = container.find(\".slide-item\"),\n\t\t\t\twrapper = container.find(\".slide-wrapper\"),\n\t\t\t\tprev = container.find(\".slide-back\"),\n\t\t\t\tnext = container.find(\".slide-next\"),\n\t\t\t\titemProps = {\n\t\t\t\t\tw: itens.eq(0).outerWidth(),\n\t\t\t\t\th: itens.eq(0).outerHeight()\n\t\t\t\t},\n\t\t\t\twrapperWidth = (itens.length*itemProps.w)+100,\n\t\t\t\tcontainerWidth = container.find(\".slide-container\").outerWidth();\n\n\t\t\twrapper.width(wrapperWidth);\n\t\t\tcontainer.find(\".slide-container\").height(itemProps.h);\n\n\t\t\tprev.css(\"top\",(itemProps.h/2)+\"px\");\n\t\t\tnext.css(\"top\",(itemProps.h/2)+\"px\");\n\n\t\t\tprev.hide();\n\t\t\tif(wrapper.width() <= container.width()) {\n\t\t\t\tnext.hide();\n\t\t\t}\n\n\t\t\tprev.on(\"click\",function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar left = wrapper.css(\"left\") == \"auto\" ? 0 : parseInt(wrapper.css(\"left\"));\n\n\t\t\t\twrapper.animate({\n\t\t\t\t\tleft: \"+=\"+itemProps.w\n\t\t\t\t},300,function() {\n\t\t\t\t\tvar nLeft = wrapper.css(\"left\") == \"auto\" ? 0 : parseInt(wrapper.css(\"left\"));\n\t\t\t\t\tif(nLeft == 0)\n\t\t\t\t\t\tprev.hide();\n\t\t\t\t});\n\t\t\t\tnext.show();\n\n\t\t\t});\n\n\t\t\tnext.on(\"click\",function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar left = wrapper.css(\"left\") == \"auto\" ? 0 : parseInt(wrapper.css(\"left\"));\n\n\t\t\t\twrapper.animate({\n\t\t\t\t\tleft: \"-=\"+itemProps.w\n\t\t\t\t},300,function() {\n\t\t\t\t\tvar nLeft = wrapper.css(\"left\") == \"auto\" ? 0 : parseInt(wrapper.css(\"left\"));\n\t\t\t\t\tif(nLeft <= -(wrapperWidth-containerWidth-100))\n\t\t\t\t\t\tnext.hide();\n\t\t\t\t});\n\t\t\t\tprev.show();\n\t\t\t});\n\t\t});\n\n\t\t$(\".alternativeHeader\").each(function() {\n\t\t\tvar menu = $(\".mainMenu nav ul\").html();\n\t\t\t$(this).find(\"nav ul\").html(menu);\n\t\t});\n\n\t\tvar headerHeight = $(\"header\").outerHeight();\n\t\t$(window).on(\"scroll\",function() {\n\t\t\tvar y = window.scrollY > 0 ? window.scrollY : (window.pageYOffset > 0 ? window.pageYOffset : document.documentElement.scrollTop);\n\n\t\t\tif(y > headerHeight) {\n\t\t\t\t$(\".alternativeHeader\").stop(true,false).animate({\n\t\t\t\t\ttop: \"0\"\n\t\t\t\t},200);\n\t\t\t} else {\n\t\t\t\t$(\".alternativeHeader\").stop(true,false).animate({\n\t\t\t\t\ttop: \"-60px\"\n\t\t\t\t},200);\n\t\t\t}\n\t\t});\n\n\t\t$(\".expandCollapseContent\").on(\"click\",function(e) {\n\t\t\te.preventDefault();\n\n\t\t\tvar idx = $(\"#issueIndex\"),\n\t\t\t\tinfo = $(\"#issueData\"),\n\t\t\t\tt = this;\n\n\t\t\tidx.css(\"float\",\"right\");\n\n\t\t\tif(info.is(\":visible\")) {\n\t\t\t\tinfo.fadeOut(\"fast\",function() {\n\t\t\t\t\tidx.animate({\n\t\t\t\t\t\twidth: \"100%\"\n\t\t\t\t\t},300);\n\t\t\t\t\t$(t).find(\".glyphBtn\").removeClass(\"opened\").addClass(\"closed\");\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tidx.animate({\n\t\t\t\t\twidth: \"75%\"\n\t\t\t\t},300,function() {\n\t\t\t\t\tinfo.fadeIn(\"fast\");\n\t\t\t\t\t$(t).find(\".glyphBtn\").removeClass(\"closed\").addClass(\"opened\");\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t$(t).tooltip(\"hide\");\n\n\t\t});\n\n\t\t$(\".collapse-title\").on(\"click\",function() {\n\t\t\tvar t = $(this),\n\t\t\t\tctt = t.next(\".collapse-content\");\n\n\t\t\tif(ctt.is(\":visible\")) {\n\t\t\t\tctt.slideUp(\"fast\");\n\t\t\t\tt.addClass(\"closed\");\n\t\t\t} else {\n\t\t\t\tctt.slideDown(\"fast\");\n\t\t\t\tt.removeClass(\"closed\");\n\t\t\t}\n\t\t});\n\n\t\t$(\".goto\").on(\"click\",function(e) {\n\t\t\te.preventDefault();\n\n\t\t\tvar d = $(this).attr(\"href\");\n\t\t\td = d.replace(\"#\",\"\");\n\n\t\t\tvar p = $(\"a[name=\"+d+\"]\").offset();\n\n\t\t\t$(\"html,body\").animate({\n\t\t\t\tscrollTop: (p.top-60)\n\t\t\t},500);\n\t\t});\n\n\n\t\t$(\".trigger\").on(\"click\",function(e) {\n\t\t\te.preventDefault();\n\t\t\tvar obj = $(this).data(\"rel\");\n\n\t\t\t$(obj).click();\n\t\t});\n\n\t\t$(\"input[name='link-share']\").focus(function() {\n\t\t\t$(this).select();\n\t\t\tif (window.clipboardData && clipboardData.setData) {\n\t\t\t\tclipboardData.setData('text', $(this).text());\n\t\t\t}\n\t\t}).mouseup(function(e) {\n\t\t\te.preventDefault();\n\t\t});\n\t}\n},\nsearchFormBuilder = {\n\tSearchHistory: \"\",\n\tLanguageFilterCheckedBuffer: [],\n\tSubjectAreasFilterCheckedBuffer: [],\n\tInit: function() {\n\t\tvar p = \"form.searchFormBuilder\";\n\t\tvar lang = document.language.lang.value;\n\n\t\tsearchFormBuilder.SearchHistory = Cookie.Get(\"searchHistory\");\n\n\t\t$(p).on(\"submit\",function(e) {\n\n\t\t\tvar historyQuery = Portal.IsMobile ? $.trim(\"#iptQueryMobile\") : $.trim(\"#iptQuery\");\n\n\t\t\tvar expr = $(\"*[name='q[]']\",p),\n\t\t\t\tconnector = $(\"select[name='bool[]']\",p),\n\t\t\t\tidx = $(\"select[name='index[]']\",p),\n\t\t\t\tsearchQuery = \"\";\n\n\t\t\tfor(var i=0,l=expr.length;i<l;i++) {\n\n\t\t\t\tif(Portal.IsMobile){\n\n\t\t\t\t\tif ( $(expr[i]).attr('id') == 'iptQueryMobile' ){\n\t\t\t\t\t\tvar v = $(expr[i]).text();\n\t\t\t\t\t}else{\n\t\t\t\t\t\tvar v = $(expr[i]).val();\n\t\t\t\t\t}\n\n\t\t\t\t}else{\n\n\t\t\t\t\tif ( $(expr[i]).attr('id') == 'iptQuery' ){\n\t\t\t\t\t\tvar v = $(expr[i]).text();\n\t\t\t\t\t}else{\n\t\t\t\t\t\tvar v = $(expr[i]).val();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(v != \"\") {\n\t\t\t\t\tvar ci = $(\"option:selected\",idx[i]).val();\n\n\t\t\t\t\tif(i >= 1) {\n\t\t\t\t\t\tvar b = $(\"option:selected\",connector[i-1]).val();\n\t\t\t\t\t\tsearchQuery += \" \"+b+\" \";\n\t\t\t\t\t}\n\t\t\t\t\tif(ci != \"\") {\n\t\t\t\t\t\tsearchQuery += \"(\"+ci+\":(\"+v+\"))\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsearchQuery += (l == 2 ? v : \"(\"+v+\")\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar where = $(\"input[name='collection']:checked\",p).val();\n\n\t\t\tif (where !== undefined && where != ''){\n\t\t\t\t// check if filter by collection is not defined\n\t\t\t\tif ( $(\"input[name='filter[in][]']\").length == 0){\n\t\t\t\t\tinitial_filter_in = $('<input>').attr({type: 'hidden', name: 'filter[in][]', value:'scl'}).appendTo('#searchForm');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar search_by_year = $(\"input[name='publicationYear']:checked\",p).val();\n\t\t\tif (search_by_year == \"1\"){\n\t\t\t\tvar pub_year_start =  $(\"select[name='y1Start'] option:selected\",p).val();\n\t\t\t\tif (pub_year_start != ''){\n\t\t\t\t\tsearchQuery += ' AND publication_year:[' + pub_year_start + ' TO *]';\n\t\t\t\t}\n\t\t\t}else if(search_by_year == \"2\"){\n\t\t\t\tvar pub_year_start =  $(\"select[name='y2Start'] option:selected\",p).val();\n\t\t\t\tvar pub_year_end =  $(\"select[name='y2End'] option:selected\",p).val();\n\t\t\t\tif (pub_year_start != '' && pub_year_end != ''){\n\t\t\t\t\tsearchQuery += ' AND publication_year:[' + pub_year_start + ' TO ' + pub_year_end + ']';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// remove boolean operators from begining or end of query\n\t\t\tsearchQuery = searchQuery.replace(/^AND|AND$|^OR|OR$/g, \"\");\n\n\t\t\tif (searchQuery == ''){\n\t\t\t\tsearchQuery = '*';\n\t\t\t}\n\t\t\tsearchQuery = $.trim(searchQuery);\n\n\t\t\tvar total = 0;\n\t\t\tvar form = document.searchForm;\n\t\t\tvar form_action = form.action;\n\t\t\tvar form_params = 'q=' + searchQuery;\n\n\t\t\tget_result_total(form_action, form_params, function(total){\n\t\t\t\tif (total == 0){\n\t\t\t\t\t$(\"#ResultArea\").hide();\n\t\t\t\t\t$(\"#NoResults\").removeClass('hide');\n\t\t\t\t\t$(\"#TotalHits\").html('0');\n\t\t\t\t\t// send query again to register in history\n\t\t\t\t\tsend_query_to_history(form_action, form_params);\n\t\t\t\t\t// update same page with no result message\n\t\t\t\t\tif (historyQuery != ''){\n\t\t\t\t\t\tvar form = document.updateHistoryPage;\n\t\t\t\t\t\t$(\"#updateHistoryPage #clear\").val(\"\");\n\t\t\t\t\t\t$(\"#updateHistoryPage #noresult\").val(\"true\");\n    \t\t\t\t\t$(\"#updateHistoryPage\").submit();\n\t\t\t\t\t}else{\n\t\t\t\t\t\t// increment history data on page\n\t\t\t\t\t\tvar history_number = parseInt($(\".searchHistoryItem\").data(\"history\"));\n\t\t\t\t\t\t$(\".searchHistoryItem\").data(\"history\", history_number + 1);\n\t\t\t\t\t\t$(\".searchHistoryItem\").html(\"#\" + (history_number + 1));\n\t\t\t\t\t\t$(\"#searchHistoryQuery\").html(searchQuery);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tvar searchForm = document.searchForm;\n\t\t\t\t\t// clear my_selection list\n\t\t\t\t\tmanipulate_bookmark('c');\n\t\t\t\t\t// execute search\n\t\t\t\t\t$('<input>').attr({type: 'hidden', name: 'q', value:searchQuery}).appendTo('#searchForm');\n\t\t\t\t\t$('<input>').attr({type: 'hidden', name: 'lang', value:lang}).appendTo('#searchForm');\n\t\t\t\t\t$('<input>').attr({type: 'hidden', name: 'page', value:'1'}).appendTo('#searchForm');\n\t\t\t\t\tsearchForm.submit();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn false;\n\t\t});\n\n\t\t$(\"textarea.form-control:visible\",p).on(\"keyup\",searchFormBuilder.TextareaAutoHeight).trigger(\"keyup\");\n\t\t\n\t\t$(\"a.clearIptText\",p).on(\"click\",searchFormBuilder.ClearPrevInput);\n\n\t\t$(p).on(\"keypress\",function(e) {\n\t\t\tif(e.keyCode == 13)\n\t\t\t\t$(p).submit();\n\t\t});\n\n\t\tif($(\"#btn-affix\"). length > 0) {\n\t\t\tvar aot = $(\"#btn-affix\").offset().top;\n\t\t}\n\t\t\n\t\tif($(\".searchActions\").length)\n\t\t\twindow.searchActionsStart = $(\".searchActions\").offset().top;\n\n\t\t$(\".newSearchField\",p).on(\"click\",function(e) {\n\t\t\te.preventDefault();\n\t\t\tsearchFormBuilder.InsertNewFieldRow(this,\"#searchRow-matriz .searchRow\",\".searchFormBuilder .searchRow-container\");\n\n\t\t\tvar ot = $(\".searchActions\").offset().top;\n\t\t\twindow.searchActionsStart = ot;\n\t\t\taot = $(\"#btn-affix\").offset().top;\n\t\t});\n\n\t\t$(\"select.setMinValue\").on(\"change\",function() {\n\t\t\tvar v = $(this).val(),\n\t\t\t\td = $(this).data(\"rel\");\n\n\t\t\tvar dv = $(d).val();\n\t\t\tv = parseInt(v);\n\t\t\tdv = parseInt(dv);\n\n\t\t\tif(dv < v)\n\t\t\t\t$(d).val(\"0\");\n\n\t\t\t$(\"option\",d).each(function() {\n\t\t\t\tvar iv = parseInt($(this).text());\n\t\t\t\tif(iv <= v)\n\t\t\t\t\t$(this).prop(\"disabled\",true);\n\t\t\t\telse\n\t\t\t\t\t$(this).prop(\"disabled\",false);\n\t\t\t});\n\t\t});\n\n\t\t$(\".collapseBlock .title a.action\").on(\"click\",function() {\n\t\t\tvar t = $(this),\n\t\t\t\tctt = t.parent().next(\".content\");\n\n\t\t\tif(ctt.is(\":visible\")) {\n\t\t\t\tctt.slideUp(\"fast\");\n\t\t\t\tt.addClass(\"closed\").removeClass(\"opened\");\n\t\t\t\tt.parent().addClass(\"closed\");\n\t\t\t} else {\n\t\t\t\tctt.slideDown(\"fast\");\n\t\t\t\tt.addClass(\"opened\").removeClass(\"closed\");\n\t\t\t\tt.parent().removeClass(\"closed\");\n\t\t\t}\n\t\t});\n\n\t\t$(\".collapseBlock .filterCollapsedList\",p).each(function() {\n\t\t\tvar t = $(this),\n\t\t\t\tchd = t.find(\".filterItem\"),\n\t\t\t\tshowAll = $(\".showAll\",t);\n\n\t\t\tif(chd.length > 5) {\n\t\t\t\tshowAll.show();\n\t\t\t}\n\t\t});\n\n\t\t$(\".collapseBlock .showAll\",p).on(\"click\",function() {\n\t\t\tvar t = $(this),\n\t\t\t\tpt = t.parent(),\n\t\t\t\ttxtToggle = t.data(\"texttoggle\"),\n\t\t\t\ttxt = t.text();\n\n\t\t\tif(pt.outerHeight() > 200) {\n\t\t\t\tpt.removeClass(\"opened\");\n\t\t\t} else {\n\t\t\t\tpt.addClass(\"opened\");\n\t\t\t}\n\t\t\tt.text(txtToggle).data(\"texttoggle\",txt);\n\t\t});\n\n\t\t$(\".collapseBlock .filterCollapsedList input:checkbox\").on(\"click\",function() {\n\t\t\t$(\"#apply_filters_button\").removeProp(\"disabled\");\n\t\t});\n\n\t\t$(\".articleAction, .searchHistoryItem, .colActions .searchHistoryIcon\",p).tooltip();\n\n\t\t$(\".selectAll\").on(\"click\",function() {\n\n\t\t\tvar t = $(this),\n\t\t\t\titens = $(\".results .item input.checkbox\"),\n\t\t\t\tselCount = $(\"#selectedCount\",p),\n\t\t\t\tselCountInt = parseInt(selCount.text())\n\t\t\t\taction = \"a\";\n\t\t\t\tvalues = \"\";\n\n\t\t\tif(t.is(\":checked\")) {\n\t\t\t\titens.each(function() {\n\t\t\t\t\t$(this).prop(\"checked\",true);\n\t\t\t\t\tvalues += $(this).val()+\",\";\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\tt.data(\"all\",\"1\");\n\n\t\t\t} else {\n\t\t\t\taction =\"d\";\n\t\t\t\titens.each(function() {\n\t\t\t\t\t$(this).prop(\"checked\",false);\n\t\t\t\t\tvalues += $(this).val()+\",\";\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\tt.data(\"all\",\"0\");\n\t\t\t\t\n\t\t\t}\n\t\t\twindow.manipulate_bookmark(action,values);\n\t\t\t\n\t\t});\n\n\t\t$(\".removeSelection\").on(\"click\",function() {\n\t\t\t\t\n\t\t\tvar itens = $(\".results .item input.checkbox\"),\n\t\t\t\tvalues = \"\";\n\t\t\t\taction = \"d\";\n\n\t\t\t\titens.each(function() {\n\t\t\t\t\t$(this).prop(\"checked\",false);\n\t\t\t\t\tvalues += $(this).val()+\",\";\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\t$(\".selectAll\").prop(\"checked\",false);\n\t\t\t\t$(\".selectAll\").data(\"all\",\"0\");\n\n\t\t\twindow.manipulate_bookmark(action,values);\n\t\t});\n\n\n\t\t$(\".clusterSelectAll\").on(\"click\",function() {\n\t\t\tvar t = $(this),\n\t\t\t\titens = $(\"#selectClusterItens .filterBody input.checkbox\"),\n\t\t\t\tchecked = t.is(\":checked\");\n\n\t\t\titens.each(function() {\n\t\t\t\t$(this).prop(\"checked\",checked);\n\t\t\t\t$(this).trigger(\"change\");\n\t\t\t});\n\n\t\t\tif(checked) {\n\t\t\t\tt.data(\"all\",\"1\");\n\t\t\t} else {\n\t\t\t\tt.data(\"all\",\"0\");\n\t\t\t\tconsole.log(\"esconder a barra de contagem\");\n\t\t\t}\n\t\t});\n\n\t\t$(\".results .item input.checkbox\").on(\"change\",function() {\n\t\t\tvar t = $(this),\n\t\t\t\tselAll = $(\".selectAll\",p),\n\t\t\t\tselCount = $(\"#selectedCount\",p),\n\t\t\t\tselCountInt = parseInt(selCount.text());\n\n\t\t\tif(!t.is(\":checked\")) {\n\t\t\t\tvar all = selAll.data(\"all\");\n\t\t\t\tif(all == \"1\") {\n\t\t\t\t\tselAll.prop(\"checked\",false).data(\"all\",\"0\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\n\t\t$(\"#form_clusters input.checkbox\").on(\"change\",function() {\n\t\t\tvar t = $(this);\n\t\t\tvar tvalue = t.val();\n\t\t\tvar tid = t.attr('id');\n\t\t\tvar cluster_id = tid.substr(0, tid.lastIndexOf('_'));\n\t\t\tvar tall_option = $(\"#\" + cluster_id + \"_ALL\");\n\t\t\tvar itens = $(\"#form_clusters #ul_\" + cluster_id + \" input.checkbox\");\n\n\t\t\tif (tvalue != '*' && tall_option.is(\":checked\")){\n\t\t\t\ttall_option.prop(\"checked\", false);\n\t\t\t} else if (tvalue == '*') {\n\t\t\t\titens.each(function() {\n\t\t\t\t\tif ( $(this).val() != '*' ){\n\t\t\t\t\t\t$(this).prop(\"checked\",false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t});\n\n\t\t$(\"a.orderBy\").on(\"click\",function() {\n\t\t\tvar t = $(this),\n\t\t\t\tfield = t.data(\"field\"),\n\t\t\t\tcontainer = $(t.data(\"rel\")),\n\t\t\t\tsort_items = [],\n\t\t\t\tgroup = t.data(\"group\");\n\n\t\t\tif(typeof group !== \"undefined\") {\n\t\t\t\tvar groupItens = $(\"a.orderBy[data-group='\"+group+\"']\");\n\t\t\t\tgroupItens.removeClass(\"orderBy_selected\");\n\t\t\t}\n\n\t\t\t$(\"a.orderBy\").removeClass(\"orderBy_selected\");\n\t\t\tt.addClass(\"orderBy_selected\");\n\n\t\t\t$(\".filterItem\",container).each(function() {\n\t\t\t\tvar ti = $(this),\n\t\t\t\t\tval = ti.data(field),\n\t\t\t\t\tarr = [];\n\n\t\t\t\tif(!isNaN(parseInt(val))) {\n\t\t\t\t\tval = parseInt(val);\n\t\t\t\t}\n\t\t\t\tarr.push(val);\n\t\t\t\tarr.push(ti);\n\t\t\t\tsort_items.push(arr);\n\t\t\t\tti.remove();\n\t\t\t});\n\n\t\t\tif(typeof sort_items[0][0] === \"number\")\n\t\t\t\tsort_items.sort(function(a, b){return b[0]-a[0]});\n\t\t\telse\n\t\t\t\tsort_items.sort(function (a, b) {\n    \t\t\t\treturn a.toString().localeCompare(b);\n\t\t\t\t});\n\n\t\t\tfor(var i=0;i<sort_items.length;i++) {\n\t\t\t\tcontainer.append(sort_items[i][1]);\n\t\t\t}\n\t\t});\n\n\n\t\t$(\".openNewWindow\").on(\"click\",function(e) {\n\t\t\te.preventDefault();\n\n\t\t\twindow.open(this.href,'print','width=760,height=550');\n\t\t});\n\n\t\tsearchFormBuilder.LanguageFilterInit();\n\t\tsearchFormBuilder.SubjectAreaFilterInit();\n\n\t\t$(\".openSelectItens\").on(\"click\",function(e) {\n\t\t\te.preventDefault();\n\n\t\t\tvar t = $(this),\n\t\t\t\trel = t.data(\"rel\"),\n\t\t\t\tfilter_id = t.data(\"filter\"),\n\t\t\t\tfilter_label = t.data(\"label\"),\n\t\t\t\tmod = $(\"#selectClusterItens\"),\n\t\t\t\tmodContainer = $(\".filterBody\",mod),\n\t\t\t\tmodTitle = $(\".modal-title\",mod);\n\n\t\t\tvar lang = document.language.lang.value;\n\t\t\t// get itens from modal window\n\t\t\tvar modal_filter_id = \"#filter_\" + filter_id\n\n\t\t\tvar toRemoveFields = $(\"input[data-filter='\" + filter_id +\"']\");\n\n\t\t\tif (toRemoveFields.length > 0) {\n\t\t\t\ttoRemoveFields.remove();\n\t\t\t}\n\n\t\t\t$(\"#orderby_results\").data(\"rel\", modal_filter_id).addClass(\"orderBy_selected\");\n\t\t\t$(\"#orderby_alpha\").data(\"rel\", modal_filter_id).removeClass(\"orderBy_selected\").html(filter_label);\n\t\t\t$(\"#statistics\").data(\"cluster\", filter_label);\n\t\t\t$(\"#statistics\").data(\"chartsource\", modal_filter_id);\n\t\t\t$(\"#exportcsv\").data(\"cluster\", filter_label);\n\t\t\t$(\"#exportcsv\").data(\"chartsource\", modal_filter_id);\n\t\t\tvar selAll = $(\"#selectClusterItens_all\");\n\t\t\tvar filter_all = $(\"#\" + filter_id + \"_ALL\");\n\n\t\t\tselAll.attr(\"name\", \"filter[\" + filter_id + \"][]\");\n\t\t\tif ( filter_all.is(\":checked\") ) {\n\t\t\t\tselAll.prop(\"checked\",true);\n\t\t\t\tselAll.data(\"all\", \"1\");\n\t\t\t}else{\n\t\t\t\tselAll.prop(\"checked\",false);\n\t\t\t\tselAll.data(\"all\", \"0\");\n\t\t\t}\n\n\t\t\tmodTitle.html(filter_label);\n\t\t\tmodContainer.empty();\n\n\t\t\tvar select_form = $(\"#selectClusterItensForm\");\n\t\t    $.ajax({ // create an AJAX call...\n\t\t        data: select_form.serialize(), // get the form data\n\t\t        type: 'GET', \t\t\t\t   // GET or POST\n\t\t        url: 'list-filter/' + filter_id + '?lang=' + lang, // the file to call\n\t\t\t\tbeforeSend: function() {\n\t\t\t\t\t$('.filterBody').html('<img src=\"' + STATIC_URL + 'image/loading.gif\" style=\"margin-left:190px\"/>');\n\t\t\t\t},\n\t\t        success: function(response) { // on success..\n\t\t\t\t\t$('.filterBody').html(response); // update the DIV\n\n\t\t\t\t\t$('.filterBody input.checkbox').off(\"change.enableBtn\").on(\"change.enableBtn\",function() {\n\t\t\t\t\t\tvar counter = $(\".filterBody input.checkbox:checked\").length,\n\t\t\t\t\t\t\tbtn = $(\".cluster-actions-menu a.singleBtn\");\n\n\t\t\t\t\t\tif(counter > 0) {\n\t\t\t\t\t\t\tbtn.removeClass(\"singleBtn_disabled\").tooltip(\"disable\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbtn.addClass(\"singleBtn_disabled\").tooltip(\"enable\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t// if select all is checked mark all itens of filter as checked\n\t\t\t\t\tif ( filter_all.is(\":checked\") ) {\n\t\t\t\t\t\titens = $(\"#selectClusterItens .filterBody input.checkbox\");\n\t\t\t\t\t\titens.each(function() {\n\t\t\t\t\t\t\t$(this).prop(\"checked\", true);\n\t\t\t\t\t\t\t$(this).trigger(\"change\");\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t        },\n\t\t\t\tcomplete: function () {\n\t\t\t\t\tsearchFormBuilder.FilterModalContentConfig(filter_id);\n\t\t\t\t\tsearchFormBuilder.FilterModalEnableDisableButtons();\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tsearchFormBuilder.FilterModalConfig(filter_id);\n\t\t\tmod.modal(\"show\");\n\n\t\t});\n\n\t\t$(\"#selectClusterItens\").on(\"click\", \".filterBody input.checkbox\", function() {\n\t\t\tvar t = $(this);\n\t\t\tvar selAll = $(\".clusterSelectAll\");\n\n\t\t\t$(\"#no_cluster_selected\").slideUp(\"fast\");\n\t\t\tvar all = selAll.data(\"all\");\n\t\t\tif(all == \"1\") {\n\t\t\t\tselAll.prop(\"checked\",false);\n\t\t\t\tselAll.data(\"all\",\"0\");\n\t\t\t}\n\t\t});\n\n\n\t\t$(\"#SendViaEmail,#Export\").on(\"shown.bs.modal\",function() {\n\t\t\tvar t = $(this),\n\t\t\t\tselection = parseInt($(\"#selectedCount\").text());\n\n\t\t\tt.find(\"input:eq(0)\").focus();\n\n\t\t\tif(selection > 0) {\n\t\t\t\tt.find(\".selection\").show();\n\t\t\t\tt.find(\".selection strong\").text(selection);\n\t\t\t} else {\n\t\t\t\tt.find(\".selection\").hide();\n\t\t\t}\n\t\t});\n\n\t\t$(\"form.validate\").on(\"submit\",function() {\n\t\t\tvar rtn = true;\n\n\t\t\t$(\"input.valid\",this).each(function() {\n\t\t\t\tvar ti = $(this);\n\n\t\t\t\tif(ti.is(\".multipleMail\")) {\n\t\t\t\t\tif(Validator.MultipleEmails(ti.val(),\";\") === false) {\n\t\t\t\t\t\tti.parent().addClass(\"has-error\");\n\t\t\t\t\t\trtn = false;\n\t\t\t\t\t} else\n\t\t\t\t\t\tti.parent().removeClass(\"has-error\");\n\t\t\t\t} else {\n\t\t\t\t\tif(ti.val() === \"\") {\n\t\t\t\t\t\tti.parent().addClass(\"has-error\");\n\t\t\t\t\t\trtn = false;\n\t\t\t\t\t} else\n\t\t\t\t\t\tti.parent().removeClass(\"has-error\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn rtn;\n\t\t});\n\n\t\t$(\".searchHistoryIcon.add\",p).on(\"click\",function() {\n\t\t\t$(\"html, body\").animate({ scrollTop: 0 }, \"fast\");\n\t\t\tsearchFormBuilder.InsertSearchHistoryItem(this);\n\t\t});\n\t\t$(\".searchHistoryIcon.search\",p).on(\"click\",function() {\n\t\t\t$(\"#iptQuery\").empty();\n\t\t\tsearchFormBuilder.InsertSearchHistoryItem(this);\n\t\t\t$(\"#searchHistoryForm\").submit();\n\t\t});\n\t\t$(\".searchHistoryIcon.erase\",p).on(\"click\",function(e) {\n\t\t\te.preventDefault();\n\t\t\tvar $item = $(this).data(\"item\");\n\t\t\t$(\"#confirmEraseItem span.item\").text($item);\n\t\t\t$(\"#confirmEraseItem input.item\").val($item);\n\n\t\t\t$(\"#confirmEraseItem\").modal(\"show\");\n\t\t});\n\t\t$(\".searchHistoryIcon.eraseAll\",p).on(\"click\",function(e) {\n\t\t\te.preventDefault();\n\n\t\t\t$(\"#confirmEraseAll\").modal(\"show\");\n\t\t});\n\n\t\t$(\"#iptQuery\").on(\"keypress\",function(e) {\n\t\t\tif(e.keyCode == 13)\n\t\t\t\t$(\"#searchHistoryForm\").submit();\n\t\t});\n\n\t\t$(\".showTooltip\").tooltip();\n\n\t\t$(\"input[data-show!=''],input[data-hide!='']\").on(\"click\",function() {\n\t\t\tvar s = $(this).data(\"show\"),\n\t\t\t\th = $(this).data(\"hide\");\n\n\t\t\tif(typeof s != \"undefined\")\n\t\t\t\t$(s).slideDown(\"fast\").find(\"input[type='radio']:eq(0)\").trigger(\"click\");\n\n\t\t\tif(typeof h != \"undefined\")\n\t\t\t\t$(h).slideUp(\"fast\");\n\n\t\t});\n\n\t\t$(\".searchModal\").on(\"click\",function() {\n\t\t\tvar d = $(this).data(\"modal\"),\n\t\t\t\texpr = $(this).data(\"expr\");\n\n\t\t\t$(\".searchExpression\",d).text(expr);\n\t\t\t$(\"#clipboardSearchExpression\").val(expr);\n\n\t\t\t$(d).modal(\"show\");\n\t\t});\n\n\t\t$(\".editQuery\").on(\"click\",function() {\n\t\t\tvar d = $(this).data(\"modal\"),\n\t\t\t\texpr = $(this).data(\"expr\"),\n\t\t\t\tq = Portal.IsMobile ? $(\"#iptQueryMobile\") : $(\"#iptQuery\");\n\n\t\t\tq.append(expr).focus();\n\t\t\t$(this).effect(\"transfer\", { to: q }, 1000);\n\t\t\tsearchFormBuilder.PlaceCaretToEnd(document.getElementById(\"iptQuery\"));\n\t\t});\n\n\t\t$(\".openCitationModal\").on(\"click\",function() {\n\t\t\tvar modal = $(\"#CitationModal\"),\n\t\t\t\ttitle = $(this).data(\"title\");\n\t\t\t\tcitationContainer = $(\"#CitationModal-Citations\"),\n\t\t\t\tdownloadContainer = $(\"#CitationModal-Downloads\"),\n\t\t\t\tcitation = $(this).data(\"citation\"),\n\t\t\t\tcitationCtt = \"\",\n\t\t\t\tdownload = $(this).data(\"download\"),\n\t\t\t\tdownloadCtt = \"\";\n\n\t\t\tif(typeof citation != \"undefined\" && typeof download != \"undefined\") {\n\t\t\t\tcitation = citation.split(\";;\");\n\t\t\t\tfor(var i=0,l=citation.length;i<l;i++) {\n\t\t\t\t\tcitation[i] = citation[i].split(\"::\");\n\t\t\t\t\tcitation[i][1] = citation[i][1].replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\\[b\\]/g,\"<strong>\").replace(/\\[\\/b\\]/g,\"</strong>\");\n\n\t\t\t\t\tcitationCtt += '<div class=\"modal-body searchExpression\">';\n\t\t\t\t\tcitationCtt += '\t<label>'+citation[i][0]+'</label>';\n\t\t\t\t\tcitationCtt += '\t<div>'+citation[i][1]+'</div>';\n\t\t\t\t\tcitationCtt += '</div>';\n\t\t\t\t}\n\n\t\t\t\tdownload = download.split(\";;\");\n\t\t\t\tfor(var i=0,l=download.length;i<l;i++) {\n\t\t\t\t\tdownload[i] = download[i].split(\"::\");\n\n\t\t\t\t\tdownloadCtt += '<a href=\"'+download[i][1]+'\" target=\"_blank\" class=\"download\">'+download[i][0]+'</a> ';\n\t\t\t\t}\n\n\t\t\t\tcitationContainer.html(citationCtt);\n\t\t\t\tdownloadContainer.html(downloadCtt);\n\n\t\t\t\tmodal.find(\".modal-title strong\").html(title);\n\t\t\t\tmodal.modal(\"show\");\n\t\t\t}\n\t\t});\n\n\t\t$(\"#apply_filters_button\").on(\"click\",function(e) {\n\t\t\tvar form = $(\"#form_clusters\");\n\t\t\tvar form_action = form.attr('action');\n\t\t\tvar form_params = form.serialize();\n\n\t\t\tvar total = 0;\n\t\t\tget_result_total(form_action, form_params, function(total){\n\t\t\t\tif (total == 0){\n\t\t\t\t\t$(\"#ResultArea\").hide();\n\t\t\t\t\t$(\"#NoResults\").removeClass('hide');\n\t\t\t\t\t$(\"#TotalHits\").html('0');\n\t\t\t\t\t$('html,body').animate({\n\t\t\t\t\t    scrollTop: 0\n\t\t\t\t\t}, 700);\n\t\t\t\t\t// send query again to register in history\n\t\t\t\t\tsend_query_to_history(form_action, form_params);\n\t\t\t\t\t// increment history data on page\n\t\t\t\t\tvar history_number = parseInt($(\".searchHistoryItem\").data(\"history\"));\n\t\t\t\t\t$(\".searchHistoryItem\").data(\"history\", history_number + 1);\n\t\t\t\t\t$(\".searchHistoryItem\").html(\"#\" + (history_number + 1));\n\t\t\t\t}else{\n\t\t\t\t\t// clear my_selection list\n\t\t\t\t\tmanipulate_bookmark('c');\n\t\t\t\t\tform.submit();\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t});\n\n\t\t$(\"input.onlyNumbers\").on(\"keydown\",function(e) {\n\t\t\tif($.inArray(e.keyCode, [46, 8, 9, 27, 13, 110]) !== -1 ||\n\t\t\t\t// Ctrl+A\n\t\t\t\t(e.keyCode == 65 && e.ctrlKey === true) ||\n\t\t\t\t// Ctrl+V\n\t\t\t\t(e.keyCode == 86 && e.ctrlKey === true) ||\n\t\t\t\t// Ctrl+R\n\t\t\t\t(e.keyCode == 82 && e.ctrlKey === true) ||\n\t\t\t\t// home, end, left, right\n\t\t\t\t(e.keyCode >= 35 && e.keyCode <= 39) ||\n\t\t\t\t// macosX keycodes\n\t\t\t\t(!e.shiftKey && (e.keyCode >= 48 && e.keyCode <= 57))\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t}).on(\"blur\",function() {\n\t\t\tvar v = $(this).val();\n\t\t\tv = v.replace(/[A-Za-z$-.\\/\\\\\\[\\]=_@!#^<>;\"]/g, \"\");\n\n\t\t\t$(this).val(v);\n\t\t});\n\n\t\t$(\".showContextHelper\").on(\"focus.showContextHelper blur.showContextHelper\",function(e) {\n\t\t\tvar t = $(this),\n\t\t\t\tcontextHelper = $(t.data(\"helper\")),\n\t\t\t\tcl = \"contextHelper_focus\",\n\t\t\t\tht = false; //have text\n\t\t\t\n\t\t\tif(contextHelper.length > 0) {\n\t\t\t\tif(e.type == \"focus\"){\n\n\t\t\t\t\tif (!contextHelper.hasClass(cl)){\n\t\t\t\t\t\tcontextHelper.addClass(cl);\n\t\t\t\t\t}else{\t\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else {\n\n\t\t\t\t\tif(e.type == \"blur\"){\n\t\t\t\t\t\tif($(\".clearIptText\").is(\":visible\")){\n\t\t\t\t\t\t\tvar ht = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!ht){\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tcontextHelper.removeClass(cl);\n\t\t\t\t\t\t},500);\t\n\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t$(\".clearIptText\").on(\"click\", function(e){\n\t\t\t\t\t\t$(\".showContextHelper\").focus();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$(\"#BuscaAjuda\").on(\"hidden.bs.modal\",function() {\n\t\t\t$(\".showContextHelper:eq(0)\").focus();\n\t\t});\n\n\n\t\t$(window).scroll(function() {\n\t\t\tif($(window).scrollTop() > window.searchActionsStart)\n\t\t\t\t$(\".searchActions\").addClass(\"fixed\");\n\t\t\telse\n\t\t\t\t$(\".searchActions\").removeClass(\"fixed\");\n\n\n\t\t\tif($(window).scrollTop() > aot){\n\t\t\t\t$(\"#btn-affix\").addClass(\"fixed\");\n\t\t\t}else{\n\t\t\t\t$(\"#btn-affix\").removeClass(\"fixed\");\n\t\t\t}\n\t\t});\n\t},\n\tShowCloseSelectedItemsBarMobile: function(param){\n\t\tif (Portal.IsMobile){\n\t\t\tif(param >0){\n\t\t\t\t$(\".topbar-mobile\").slideDown('fast');\n\t\t\t}else{\n\t\t\t\t$(\".topbar-mobile\").slideUp();\n\t\t\t}\n\t\t}\n\t},\n\tInsertSearchHistoryItem: function(obj) {\n\t\tvar $item = $(obj).data(\"item\"),\n\t\t\t$ctt = $(obj).parent().parent().find(\".colSearch\").text(),\n\t\t\tq = Portal.IsMobile ? $(\"#iptQueryMobile\") : $(\"#iptQuery\");\n\t\t\t\n\t\t\tshItem = '&#160;<div class=\"searchHistoryItem\" contenteditable=\"false\"  data-toggle=\"tooltip\" data-placement=\"top\" title=\"'+$ctt+'\">#'+$item+'</div> AND&#160;';\n\n\t\tq.append(shItem).focus();\n\t\tq.find(\".searchHistoryItem\").tooltip();\n\t\t$(obj).effect(\"transfer\", { to: q.find(\".searchHistoryItem:last-child\") }, 1000);\n\t\tsearchFormBuilder.PlaceCaretToEnd(document.getElementById(\"iptQuery\"));\n\t},\n\tInsertNewFieldRow: function(t,matrix,container) {\n\t\tt = $(t);\n\t\tmatrix = $(matrix).clone();\n\t\tcontainer = $(container);\n\n\t\tvar c = t.data(\"count\");\n\n\t\tmatrix.attr(\"id\",\"searchRow-\"+c);\n\t\tmatrix.find(\".eraseSearchField\").data(\"rel\",c);\n\n\t\tmatrix.find(\".eraseSearchField\").on(\"click\",function(e) {\n\t\t\te.preventDefault();\n\t\t\tsearchFormBuilder.EraseFieldRow(this);\n\t\t});\n\n\t\tif(searchFormBuilder.SearchHistory != \"\") {\n\t\t\tmatrix.find(\"input[name='q[]']\").on(\"focus\",function() {\n\t\t\t\tsearchFormBuilder.SearchHistoryFocusIn(this);\n\t\t\t}).on(\"blur\",function() {\n\t\t\t\tsearchFormBuilder.SearchHistoryFocusOut(this);\n\t\t\t});\n\t\t}\n\n\t\tmatrix.appendTo(container).slideDown(\"fast\");\n\n\t\tmatrix.find(\"textarea.form-control:visible\").on(\"keyup\",searchFormBuilder.TextareaAutoHeight).trigger(\"keyup\");\n\t\tmatrix.find(\"a.clearIptText\").on(\"click\",searchFormBuilder.ClearPrevInput);\n\t\tmatrix.find(\".showTooltip\").tooltip();\n\n\t\tc = parseInt(c);\n\t\tc++;\n\t\tt.data(\"count\",c);\n\t},\n\tTextareaAutoHeight: function() {\n\t\t$(this).css(\"height\",\"auto\");\n\t\t$(this).height(this.scrollHeight);\n\t\tif(this.value != \"\")\n\t\t\t$(this).next(\"a\").fadeIn(\"fast\");\n\t\telse\n\t\t\t$(this).next(\"a\").fadeOut(\"fast\");\n\t},\n\tClearPrevInput: function() {\n\t\t$(this).prev(\"input,textarea\").val(\"\").trigger(\"keyup\");\n\t},\n\tEraseFieldRow: function(t) {\n\t\tt = $(t);\n\n\t\tvar i = t.data(\"rel\");\n\n\t\t$(\"#searchRow-\"+i).slideUp(\"fast\",function() {\n\t\t\t$(this).remove();\n\t\t});\n\t},\n\tCountCheckedResults: function(t,r) {\n\t\twindow.manipulate_bookmark(\"count\");\n\t},\n\tSearchHistoryFocusIn: function(t) {\n\t\tif(searchFormBuilder.SearchHistory != \"\") {\n\t\t\tvar pos = $(t).offset();\n\n\t\t\t$(\"#searchHistory\").data(\"rel\",t).css({\n\t\t\t\t\"top\": (pos.top+50)+\"px\",\n\t\t\t\t\"left\": (pos.left)+\"px\"\n\t\t\t}).slideDown(\"fast\");\n\t\t}\n\t},\n\tSearchHistoryFocusOut: function(t) {\n\t\tif(searchFormBuilder.SearchHistory != \"\") {\n\t\t\tsetTimeout(function() {\n\t\t\t\t$(\"#searchHistory\").slideUp(\"fast\");\n\t\t\t},100);\n\t\t}\n\t},\n\tSearchHistoryClick: function(txt,t) {\n\t\tvar txt = $(txt).text();\n\t\t\ttxt = txt.substr((txt.indexOf(\": \")+2),txt.length);\n\n\t\t$(t).val(txt).focus();\n\t},\n\tPlaceCaretToEnd: function(el) {\n\t\tel.focus();\n\t    if (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n\t\t\tvar range = document.createRange();\n\t\t\trange.selectNodeContents(el);\n\t\t\trange.collapse(false);\n\n\t\t\tvar sel = window.getSelection();\n\t\t\tsel.removeAllRanges();\n\t\t\tsel.addRange(range);\n\t\t} else if (typeof document.body.createTextRange != \"undefined\") {\n\t\t\tvar textRange = document.body.createTextRange();\n\t\t\ttextRange.moveToElementText(el);\n\t\t\ttextRange.collapse(false);\n\t\t\ttextRange.select();\n\t    }\n\t},\n\tLanguageFilterInit: function () {\n\n\t\t// Buffer the selected languages for comparing on the hidden modal event\n\t\t$(\"input[id^='la_']\").each(function () {\n\t\t\tif ($(this).is(\":checked\")) {\n\t\t\t\tsearchFormBuilder.LanguageFilterCheckedBuffer.push($(this).attr('id'));\n\t\t\t}\n\t\t});\n\n\t\t$(\"input[id^='la_']\").change(function (e) {\n\t\t\te.preventDefault();\n\n\t\t\tif (!$(this).is(\":checked\"))\n\t\t\t\treturn;\n\n\t\t\t$.when(get_languages_checked()).done(function (languagesChecked) {\n\n\t\t\t\tif (languagesChecked.length > 1) {\n\t\t\t\t\t$(\"#openSelectItens_la\").click();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t$('#selectClusterItens').on('hidden.bs.modal', function () {\n\n\t\t\tif ($('#mainLanguageSelect').length > 0) {\n\n\t\t\t\t$.when($(\"input[id^='la_']\").prop('checked', false)).done(function () {\n\t\t\t\t\tfor (var i = 0; i < searchFormBuilder.LanguageFilterCheckedBuffer.length; i++) {\n\t\t\t\t\t\tvar elementID = '#' + searchFormBuilder.LanguageFilterCheckedBuffer[i];\n\t\t\t\t\t\t$(elementID).prop('checked', true);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t});\n\t},\n\tFilterModalConfig: function (filter_id) {\n\n\t\tif (filter_id == 'la' || filter_id == 'subject_area') {\n\n\t\t\t$('.filterHead').addClass('hidden');\n\t\t\t$('.filterBody').addClass('filterBodyNoOverflow');\n\n\t\t} else {\n\n\t\t\t$('.filterHead').removeClass('hidden');\n\t\t\t$('.filterBody').removeClass('filterBodyNoOverflow');\n\t\t}\n\t},\n\tFilterModalContentConfig: function (filter_id) {\n\n\t\tif (filter_id == 'la') {\n\n\t\t\tvar translations = get_language_filter_translations();\n\n\t\t\t$('#mainLanguageTitle').text(translations.mainLanguageTitle);\n\t\t\t$('#mainLanguageSelect').attr('placeholder', translations.mainLanguageSelectPlaceholder);\n\t\t\t$('#addSecondLanguageRow').text(translations.addSecondLanguageRowText);\n\n\t\t\t$.when(get_languages_checked()).done(function (languagesChecked) {\n\t\t\t\tif (languagesChecked.length > 0) {\n\t\t\t\t\tadd_languages_checked(languagesChecked);\n\t\t\t\t} else {\n\t\t\t\t\t$(\"#mainLanguageSelect\").selectize()[0].selectize.setValue(null);\n\t\t\t\t\t$(\"#secondaryLanguageCtt\").html(null);\n\t\t\t\t}\n\t\t\t});\n\n\t\t} else if (filter_id == 'subject_area') {\n\n\t\t\tvar translations = get_subject_area_filter_translations();\n\n\t\t\t$('#mainThematicTitle').text(translations.mainThematicTitle);\n\t\t\t$('#mainSubjectAreaSelect').attr('placeholder', translations.mainSubjectAreaSelectPlaceholder);\n\t\t\t$('#addSecondSubjectAreaRow').text(translations.addSecondSubjectAreaRowText);\n\n\t\t\t$.when(get_subject_areas_checked()).done(function (subjectAreasChecked) {\n\t\t\t\tif (subjectAreasChecked.length > 0) {\n\t\t\t\t\tadd_subject_areas_checked(subjectAreasChecked);\n\t\t\t\t} else {\n\t\t\t\t\t$(\"#mainSubjectAreaSelect\").selectize()[0].selectize.setValue(null);\n\t\t\t\t\t$(\"#secondarySubjectAreaCtt\").html(null);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\tFilterModalEnableDisableButtons: function () {\n\n\t\tvar anySelected = false;\n\n\t\t$('.selectize-input').each(function () {\n\t\t\tvar t = $(this),\n\t\t\t\tval = t.val();\n\n\t\t\tif (val !== \"\") {\n\t\t\t\tanySelected = true;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t\tif (anySelected) {\n\t\t\t$(\".openStatistics\").removeClass(\"singleBtn_disabled\").tooltip(\"disable\");\n\t\t\t$(\".exportCSV\").removeClass(\"singleBtn_disabled\").tooltip(\"disable\");\n\t\t} else {\n\t\t\t$(\".openStatistics\").addClass(\"singleBtn_disabled\").tooltip(\"enable\");\n\t\t\t$(\".exportCSV\").addClass(\"singleBtn_disabled\").tooltip(\"enable\");\n\t\t}\n\t},\n\tSubjectAreaFilterInit: function () {\n\n\t\t// Buffer the selected subject areas for comparing on the hidden modal event\n\t\t$(\"input[id^='subject_area_']\").each(function () {\n\t\t\tif ($(this).is(\":checked\")) {\n\t\t\t\tsearchFormBuilder.SubjectAreasFilterCheckedBuffer.push($(this).attr('id'));\n\t\t\t}\n\t\t});\n\n\t\t$(\"input[id^='subject_area_']\").change(function (e) {\n\t\t\te.preventDefault();\n\n\t\t\tif (!$(this).is(\":checked\"))\n\t\t\t\treturn;\n\n\t\t\t$.when(get_subject_areas_checked()).done(function (subjectAreasChecked) {\n\n\t\t\t\tif (subjectAreasChecked.length > 1) {\n\t\t\t\t\t$(\"#openSelectItens_subject_area\").click();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t$('#selectClusterItens').on('hidden.bs.modal', function () {\n\n\t\t\tif ($('#mainSubjectAreaSelect').length > 0) {\n\n\t\t\t\t$.when($(\"input[id^='subject_area_']\").prop('checked', false)).done(function () {\n\t\t\t\t\tfor (var i = 0; i < searchFormBuilder.SubjectAreasFilterCheckedBuffer.length; i++) {\n\t\t\t\t\t\tvar elementID = '#' + searchFormBuilder.SubjectAreasFilterCheckedBuffer[i];\n\t\t\t\t\t\t$(elementID).prop('checked', true);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n},\nArticle = {\n\tTopBinder: [],\n\tInit: function() {\n\t\tvar articleText = $(\"#articleText\"),\n\t\t\tarticleTextP = articleText.offset(),\n\t\t\tarticleMenuW = $(\".articleMenu\").width(),\n\t\t\tp = $(\".paragraph\",articleText);\n\n\t\tfor(var i = 0, l = p.length; i<l; i++) {\n\t\t\tvar c = $(\"p\",p[i]).outerHeight(), r = $(\".refList\",p[i]), rh = r.outerHeight();\n\t\t\tif(rh > c) {\n\t\t\t\tr.addClass(\"outer\").css(\"height\",c);\n\t\t\t}\n\t\t}\n\n\t\t$(\"sup\",p).on(\"mouseenter mouseleave\",function(e) {\n\t\t\tvar c = this.className;\n\t\t\tc = c.replace(\"xref \",\"\");\n\t\t\tvar b = $(\"li.\"+c), p = b.parent(\"ul\");\n\n\t\t\tif(c.indexOf(\" \") >= 0) {\n\t\t\t\tc = c.split(\" \");\n\t\t\t\tc = \"li.\" + c.join(\",li.\");\n\t\t\t\tb = $(c);\n\t\t\t\tp = b.parent(\"ul\");\n\t\t\t}\n\t\t\tif(e.type === \"mouseenter\") {\n\t\t\t\tp.addClass(\"full\");\n\t\t\t\tb.addClass(\"highlight\").find(\".opened\").fadeIn(\"fast\");\n\t\t\t} else {\n\t\t\t\tp.removeClass(\"full\");\n\t\t\t\tb.removeClass(\"highlight\").find(\".opened\").hide();\n\t\t\t}\n\t\t});\n\t\t$(\".refList li\",p).on(\"mouseenter mouseleave\",function(e) {\n\t\t\tvar p = $(this).parent(\"ul\");\n\t\t\tif(e.type === \"mouseenter\") {\n\t\t\t\tp.addClass(\"full\");\n\t\t\t\t$(this).addClass(\"highlight\").find(\".opened\").fadeIn(\"fast\");\n\t\t\t} else {\n\t\t\t\tp.removeClass(\"full\");\n\t\t\t\t$(this).removeClass(\"highlight\").find(\".opened\").hide();\n\t\t\t}\n\t\t});\n\n\t\t$(\".thumb\").on(\"mouseenter mouseleave click\",function(e) {\n\t\t\tvar p = $(this).parent().parent().find(\".preview\");\n\t\t\tif(e.type == \"mouseenter\") {\n\t\t\t\tp.fadeIn(\"fast\");\n\t\t\t} else if(e.type == \"mouseleave\") {\n\t\t\t\tp.fadeOut(\"fast\");\n\t\t\t} else if(e.type == \"click\") {\n\t\t\t\twindow.open(p.find(\"img\").attr(\"src\"));\n\t\t\t}\n\t\t});\n\n\t\t$(\".collapseTitle\").on(\"click\",function() {\n\t\t\tvar ctt = $(this).next(),\n\t\t\t\tico = $(this).find(\".collapseIcon\");\n\n\t\t\tif(ctt.is(\":visible\")) {\n\t\t\t\tctt.slideUp(\"fast\");\n\t\t\t\tico.removeClass(\"opened\");\n\t\t\t} else {\n\t\t\t\tctt.slideDown(\"fast\");\n\t\t\t\tico.addClass(\"opened\");\n\t\t\t}\n\t\t});\n\n\t\t$(\".expandReduceText\").on(\"click\",function(e) {\n\t\t\te.preventDefault();\n\t\t\tvar ref = $(\"#articleText .ref\"),\n\t\t\t\ttxt = $(\"#articleText .text\"),\n\t\t\t\ts = $(this).data(\"expandreducetext\"),\n\t\t\t\ttw = $(this).data(\"defaultwidth\");\n\n\t\t\tif(typeof tw == \"undefined\")\n\t\t\t\t$(this).data(\"defaultwidth\",txt.outerWidth());\n\n\t\t\tif(s == true) {\n\t\t\t\tref.hide();\n\t\t\t\ttxt.outerWidth(\"100%\");\n\n\t\t\t\t$(this).data(\"expandreducetext\",false);\n\t\t\t} else {\n\t\t\t\ttxt.width(tw);\n\t\t\t\tref.hide();\n\n\t\t\t\t$(this).data(\"expandreducetext\",true);\n\t\t\t}\n\n\t\t\tvar t = $(window).scrollTop();\n\t\t\tsetTimeout(function() {\n\t\t\t\tArticle.ArticleStructureBuilder();\n\t\t\t\tArticle.ArticleStructureSelect(t);\n\t\t\t},100);\n\n\n\t\t});\n\n\t\t$(\".articleTxt sup.xref:not(.big)\").on(\"click\",function() {\n\t\t\tvar c = $(this).text(),\n\t\t\t\td = $(\".ref-list\");\n\n\t\t\tif(c.indexOf(\",\") == -1) {\n\t\t\t\tparseInt(c);\n\t\t\t\tc--;\n\t\t\t} else {\n\t\t\t\tc = c.split(\",\");\n\t\t\t\tc = c[0];\n\n\t\t\t\tparseInt(c);\n\t\t\t\tc--;\n\t\t\t}\n\n\t\t\tvar p = $(\"li:eq(\"+c+\")\",d).offset();\n\t\t\t$(\"html,body\").animate({\n\t\t\t\tscrollTop: (p.top-60)\n\t\t\t},500);\n\t\t});\n\n\t\tarticleTextP.top = articleTextP.top - 25;\n\t\t$(window).scroll(function() {\n\t\t\tvar t = $(window).scrollTop();\n\t\t\tif(t > articleTextP.top)\n\t\t\t\t$(\".articleMenu\").addClass(\"fixed\").width(articleMenuW);\n\t\t\telse\n\t\t\t\t$(\".articleMenu\").removeClass(\"fixed\");\n\n\t\t\tArticle.ArticleStructureSelect(t);\n\t\t});\n\n\t\tvar downloadOpt = $(\".downloadOptions li.group\"),\n\t\t\tdownloadOptW = 100/downloadOpt.length;\n\n\t\tdownloadOpt.css(\"width\",downloadOptW+\"%\");\n\n\n\t\tArticle.ArticleStructureBuilder();\n\t},\n\tArticleStructureBuilder: function() {\n\t\tvar structure = $(\".articleMenu\"),\n\t\t\tcontent = $(\"#articleText .articleSection\"),\n\t\t\tidx = 0,\n\t\t\tctt = '';\n\n\t\tArticle.TopBinder = [];\n\n\t\tcontent.each(function() {\n\t\t\tvar t = $(this).data(\"anchor\"),\n\t\t\t\th = $(this).find(\"h1\"),\n\t\t\t\toffset = $(this).offset();\n\n\t\t\tif(idx == 0)\n\t\t\t\tArticle.TopBinder.push(0);\n\t\t\telse\n\t\t\t\tArticle.TopBinder.push(offset.top);\n\n\t\t\tif(typeof t == \"undefined\") return true;\n\n\t\t\tctt += '<li '+(idx == 0 ? 'class=\"selected\"' : '')+'>';\n\t\t\tctt += '\t<a href=\"#articleSection'+idx+'\">'+t+'</a>';\n\n\t\t\tif(h.length > 1) {\n\t\t\t\tvar iidx = 0;\n\t\t\t\tctt += '<ul>';\n\t\t\t\th.each(function() {\n\t\t\t\t\tvar ooffset = $(this).offset();\n\t\t\t\t\tArticle.TopBinder.push(ooffset.top);\n\n\t\t\t\t\tctt += '<li>';\n\t\t\t\t\tctt += '\t<a href=\"#as'+idx+'-heading'+iidx+'\">'+$(this).text()+'</a>';\n\t\t\t\t\tctt += '</li>';\n\n\t\t\t\t\tiidx++;\n\t\t\t\t});\n\t\t\t\tctt += '</ul>';\n\t\t\t}\n\t\t\tctt += '</li>';\n\n\t\t\tidx++;\n\t\t});\n\n\t\tstructure.html(ctt);\n\n\t\t$(\"a\",structure).on(\"click\",function(e) {\n\t\t\te.preventDefault();\n\n\t\t\tvar d = $(this).attr(\"href\");\n\t\t\td = d.replace(\"#\",\"\");\n\n\t\t\tvar p = $(\"a[name=\"+d+\"]\").offset();\n\n\t\t\t$(\"html,body\").animate({\n\t\t\t\tscrollTop: (p.top-60)\n\t\t\t},500);\n\t\t});\n\t},\n\tArticleStructureSelect: function(pos) {\n\t\tvar structure = $(\".articleMenu\"),\n\t\t\tidx = 0;\n\n\t\tfor(var i=0,l=Article.TopBinder.length;i<l;i++) {\n\t\t\tif(pos <= (Article.TopBinder[i]-100)) {\n\t\t\t\tstructure.find(\"li\").removeClass(\"selected\");\n\t\t\t\tstructure.find(\"li:eq(\"+(i-1)+\")\").addClass(\"selected\");\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t}\n};\n\nvar Validator = {\nMultipleEmails: function(val,delimiter) {\n\tvar delimiter = delimiter || ';';\n\tvar filter  = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\tvar error = true;\n\n\tvar aEmails = val.split(delimiter);\n\n\tfor(var i = 0; i < aEmails.length; i++) {\n\t\taEmails[i] = aEmails[i].trim();\n\t\tif(aEmails[i] == '' || filter.test(aEmails[i]) == false)\n\t\t\terror = false;\n\t}\n\n\treturn error;\n}\n};\n\nvar Cookie = {\n\tGet: function(cookieName,path) {\n\t\tif(typeof path === \"undefined\") path = \"\";\n\t\telse path = path+\"/\";\n\t\tcookieName = path+cookieName;\n\t\tif (document.cookie.length > 0) {\n\t        c_start = document.cookie.indexOf(cookieName + \"=\");\n\t        if (c_start != -1) {\n\t            c_start = c_start + cookieName.length + 1;\n\t            c_end = document.cookie.indexOf(\";\", c_start);\n\t            if (c_end == -1) {\n\t                c_end = document.cookie.length;\n\t            }\n\t            return unescape(document.cookie.substring(c_start, c_end));\n\t        }\n\t    }\n\t    return \"\";\n\t},\n\tSet: function(cookieName, value, days, path) {\n\t\tvar expires;\n\t\tif(typeof days !== \"undefined\") {\n\t        var date = new Date();\n\t        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n\t        expires = \"; expires=\" + date.toGMTString();\n\t    } else\n\t    \texpires = \"\";\n\t    if(typeof path === \"undefined\") path = \"\";\n\t    else path = path + \"/\";\n\n\t    if(Cookie.Get(cookieName) != \"\") {\n\t    \tdocument.cookie = path+cookieName + \"=\" + value + \"expires=Thu, 01 Jan 1970 00:00:01 GMT\" + \"; path=/\";\n\t    }\n\t    document.cookie = path+cookieName + \"=\" + value + expires + \"; path=/\";\n\t}\n};\n\n$(function() {\n\tPortal.Init();\n\n\t// altera orientação do dropdown quando ultrapassar altura da tela.\n\t$(document).on(\"shown.bs.dropdown\", \".dropdown\", function () {\n\t    var ul = $(this).children(\".dropdown-menu\");\n\t    var button = $(this).children(\".dropdown-toggle\");\n\t    var ulOffset = ul.offset();\n\t    var spaceUp = (ulOffset.top - button.height() - ul.height()) - $(window).scrollTop();\n\t    var spaceDown = $(window).scrollTop() + $(window).height() - (ulOffset.top + ul.height());\n\t    if (spaceDown < 0 && (spaceUp >= 0 || spaceUp > spaceDown))\n\t      $(this).addClass(\"dropup\");\n\t}).on(\"hidden.bs.dropdown\", \".dropdown\", function() {\n\t    $(this).removeClass(\"dropup\");\n\t});\n\n\n\tif($(\"form.searchFormBuilder\").length)\n\t\tsearchFormBuilder.Init();\n\n\tif($(\"#articleText\").length)\n\t\tArticle.Init();\n\n\t$(\".goto_page\").keyup(function(event){\n\t    if(event.keyCode == 13){\n\t    \tnew_page = $(this).val();\n\t        go_to_page(new_page);\n\t    }\n\t});\n\n\t$(\".exportCSV\").on(\"click\",function(e) {\n\t\te.preventDefault();\n\n\t\tvar t = $(this),\n\t\t\ttitle = t.data(\"cluster\"),\n\t\t\tchartSource = t.data(\"chartsource\");\n\n\t\tvar grupo = $(chartSource);\n\t    var lista = grupo.find('li');\n\t\tvar regex = /<span>\\d+<\\/span>/i;\n        var data = [];\n        var cluster_selected = false;\n\n\t    for (i = 0; i < lista.length; i++){\n\t\t\tclusterSelection = lista[i].getElementsByTagName('input')[0];\n\t\t\tif (!clusterSelection.checked){\n\t\t\t\tcontinue;\n\t\t\t}\n\t        cluster = lista[i].innerHTML;\n\t        clusterLabel = lista[i].getElementsByTagName('label')[0].innerHTML;\n\t\t\tclusterLabel = clusterLabel.replace(/^\\s+|\\s+$/g, '');\n\n\t        ma = regex.exec(cluster);\n\t        if (ma != null) {\n\t            clusterTotal = ma[0].replace(/(<([^>]+)>)/g,'');\n                data[clusterLabel] = clusterTotal;\n                cluster_selected = true;\n\t        }\n\t    }\n\n\t\tif (!cluster_selected){\n\t\t\t$(\"#no_cluster_selected\").slideDown(\"fast\");\n\t\t\treturn;\n\t\t}\n\n\t    var csvLink  = SEARCH_URL + \"chartjs/?type=export-csv&title=\" + title;\n\t\tif(isOldIE) {\n\t\t\tcsvLink = encodeURI(csvLink);\n\t\t}\n        // create a tmp form to submit via POST data\n        var form = document.createElement(\"form\");\n        form.setAttribute(\"method\", 'POST');\n        form.setAttribute(\"action\", csvLink);\n        form.setAttribute(\"target\", '_blank');\n\n        for (key in data) {\n            var input_label = document.createElement('input');\n            var input_data = document.createElement('input');\n            input_label.type = 'hidden';\n            input_label.name = 'l[]';\n            input_label.value = key;\n            form.appendChild(input_label);\n            input_data.type = 'hidden';\n            input_data.name = 'd[]';\n            input_data.value = data[key];\n            form.appendChild(input_data);\n        }\n\n        document.body.appendChild(form);\n        form.submit();\n\t});\n\n\t$(\".openStatistics\").on(\"click\",function(e) {\n\t\te.preventDefault();\n\n\t\tvar t = $(this),\n\t\t\ttitle = t.data(\"cluster\"),\n\t\t\tchartType = t.data(\"type\"),\n\t\t\tchartSource = t.data(\"chartsource\");\n\n\t\t// check if has any item selected\n\t\tvar grupo = $(chartSource);\n\t\tvar lista = grupo.find('li');\n\t\tvar any_selected = false;\n\t\tfor (i = 0; i < lista.length; i++){\n\t\t\tclusterSelection = lista[i].getElementsByTagName('input')[0];\n\t\t\tif (clusterSelection.checked){\n\t\t\t\tany_selected = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (any_selected == false){\n\t\t\t$(\"#no_cluster_selected\").slideDown(\"fast\");\n\t\t\treturn;\n\t\t}\n\n\t\t$(\"#Statistics\").data({\n\t\t\t\"title\": title,\n\t\t\t\"charttype\": chartType,\n\t\t\t\"chartsource\": chartSource\n\t\t}).modal({\n\t\t\t\"show\": true\n\t\t});\n\t});\n\n\t$(\"#Statistics\").on(\"shown.bs.modal\",function() {\n\t\tvar regex = /<span>\\d+<\\/span>/i;\n\t    var params= \"\";\n\n\t\tvar t = $(this),\n\t\t\tchartBlock = $(\".chartBlock\",this),\n\t\t\ttitle = t.data(\"title\"),\n\t\t\tchartType = t.data(\"charttype\"),\n\t\t\tchartSource = t.data(\"chartsource\");\n\n\t\tvar grupo = $(chartSource);\n\t    var lista = grupo.find('li');\n\n\t    for (i = 0; i < lista.length; i++){\n\t\t\tclusterSelection = lista[i].getElementsByTagName('input')[0];\n\t\t\tif (!clusterSelection.checked){\n\t\t\t\tcontinue;\n\t\t\t}\n\t        cluster = lista[i].innerHTML;\n\t        clusterLabel = lista[i].getElementsByTagName('label')[0].innerHTML;\n\t\t\tclusterLabel = clusterLabel.replace(/^\\s+|\\s+$/g, '');\n\n\t        ma = regex.exec(cluster);\n\t        if (ma != null) {\n\t            clusterTotal = ma[0].replace(/(<([^>]+)>)/g,'');\n\t            params += \"&l[]=\" + clusterLabel + \"&d[]=\" + clusterTotal;\n\t        }\n\t    }\n\t    var chartDataUrl = \"chartjs/?type=\" + chartType + \"&title=\" + title;\n\t    var csvLink  = \"chartjs/?type=export-csv&title=\" + title + params;\n\n\t\tchartDataUrl = encodeURI(chartDataUrl);\n\t\tif(isOldIE) {\n\t\t\tcsvLink = encodeURI(csvLink);\n\t\t}\n\n\t\tt.find(\".modal-title .cluster\").text(title);\n\t\t//t.find(\".link a\").attr(\"href\",csvLink);\n\n\t\tchartBlock.html('<canvas id=\"chart\" width=\"950\" height=\"400\"></canvas>');\n\n\t\tvar canvas = $(\"#chart\").get(0);\n\n\t\tif(isOldIE) {\n\t\t\tcanvas = G_vmlCanvasManager.initElement(canvas);\n\t\t}\n\n\t\tvar ctx = canvas.getContext(\"2d\");\n\t\tctx.clearRect(0,0,550,400);\n\n\t\t$.ajax({\n            type: \"POST\",\n\t\t\turl: chartDataUrl,\n            data: params,\n\t\t\tdataType: \"json\",\n\t\t\tbeforeSend: function() {\n\t\t\t\tchartBlock.addClass(\"loading\");\n\t\t\t}\n\t\t}).done(function(data) {\n\t\t\tchartBlock.removeClass(\"loading\");\n\t\t\tswitch(chartType) {\n\t\t\t\tcase \"doughnut\":\n\t\t\t\t\twindow.graph = new Chart(ctx).Doughnut(data,{\n\t\t\t\t\t\tscaleGridLineWidth : 1\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"bar\":\n\t\t\t\t\twindow.graph = new Chart(ctx).Bar(data,{\n\t\t\t\t\t\tscaleGridLineWidth : 1\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"line\":\n\t\t\t\t\twindow.graph = new Chart(ctx).Line(data,{\n\t\t\t\t\t\tscaleGridLineWidth : 1\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"pie\":\n\t\t\t\t\twindow.graph = new Chart(ctx).Pie(data,{\n\t\t\t\t\t\tscaleGridLineWidth : 1\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\twindow.graph = new Chart(ctx).Pie(data,{\n\t\t\t\t\t\tscaleGridLineWidth : 1\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t}).on(\"hidden.bs.modal\",function() {\n\t\twindow.graph.clear().destroy();\n\t\t$(\".chartBlock canvas\",this).remove();\n\t});\n\n\t$(\".openExport, .sendViaMail\").on(\"click\",function(e) {\n\t\tselection_count = $(\".my_selection_count\").html();\n\t\ttotal = parseInt(selection_count);\n\t    if(total > 0) {\n\t\t\t$(\"#export_selection_user_selection\").prop('checked', true);\n\t\t\t$(\"#sendViaEmail_selection_my_selection\").prop('checked', true);\n\t\t}else{\n\t\t\t$(\"#export_selection_current_page\").prop('checked', true);\n\t\t\t$(\"#sendViaEmail_selection_page\").prop('checked', true);\n\t\t}\n\t});\n\n\t$(\".openJournalInfo\").on(\"click\",function(e) {\n\t\te.preventDefault();\n\t\tvar t = $(this),\n\t\t\tissn = t.data(\"issn\"),\n\t\t\tpublisher = t.data(\"publisher\"),\n\t\t\tcollection = t.data(\"collection\");\n\n\t\tvar journal_title = t.html();\n\t\t$(\"#JournalInfo\").modal(\"show\");\n\t\tmodal_body = $('#JournalInfo .modal-body');\n\t\tmodal_footer = $('#JournalInfo .modal-footer');\n\t\tmodal_body.html('<h2>' + journal_title + '</h2>');\n\n\t\tmodal_body.append('<p>' + publisher + '</p>');\n\t\tif (issn != ''){\n\t\t\tmodal_body.append('<strong>ISSN:</strong> ' + issn + '<br/>');\n\t\t}\n\n\t\t// make request to citedby service\n\t\t$.ajax({\n\t\t\ttype: \"get\",\n\t\t\turl: 'http://analytics.scielo.org/ajx/bibliometrics/journal/google_h5m5_chart?',\n\t\t\tdata: 'journal=' + issn + '&collection=' + collection,\n\t\t\tdataType: 'jsonp',\n\t\t\tsuccess: function(response) { // on success..\n\t\t\t\th5_serie = response.options.series[0].data;\n\t\t\t\th5_last = h5_serie[h5_serie.length-1];\n\t\t\t\tm5_serie = response.options.series[1].data;\n\t\t\t\tm5_last = m5_serie[h5_serie.length-1];\n\t\t\t\tyear_list = response.options.xAxis.categories;\n\t\t\t\tlast_year = year_list[year_list.length-1];\n\t\t\t\tmodal_body.append('<strong>Google Scholar</strong><br/>');\n\t\t\t\tmodal_body.append('<strong>' + last_year + '</strong><br/>');\n\t\t\t\tmodal_body.append('<strong>índice h5:</strong> <a href=\"' +  h5_last.ownURL + '\" target=\"_blank\">' + h5_last.y + '</a><br/>');\n\t\t\t\tmodal_body.append('<strong>mediana h5:</strong> <a href=\"' +  m5_last.ownURL + '\" target=\"_blank\">' + m5_last.y + '</a><br/>');\n\t\t\t}\n\t\t});\n\t\t$(\"#journal_info_more_link\").attr(\"href\", \"http://analytics.scielo.org/?journal=\" + issn + \"&collection=\" + collection);\n\t});\n});\n\nfunction get_language_filter_translations() {\n\n\tvar lang = $(document.language.lang).val();\n\n\tvar translations = {\n\t\tmainLanguageTitle: 'IDIOMAS SELECIONADOS',\n\t\tmainLanguageSelectPlaceholder: 'Selecione o idioma',\n\t\taddSecondLanguageRowText: 'Adicionar outro idioma +'\n\t};\n\n\tswitch (lang) {\n\n\t\tcase 'en':\n\t\t\ttranslations.mainLanguageTitle = 'SELECTED LANGUAGES';\n\t\t\ttranslations.mainLanguageSelectPlaceholder = 'Select the language';\n\t\t\ttranslations.addSecondLanguageRowText = 'Add another language +';\n\t\t\tbreak;\n\n\t\tcase 'es':\n\t\t\ttranslations.mainLanguageTitle = 'IDIOMAS SELECCIONADAS';\n\t\t\ttranslations.mainLanguageSelectPlaceholder = 'Seleccione el idioma';\n\t\t\ttranslations.addSecondLanguageRowText = 'Añadir otro idioma +';\n\t\t\tbreak;\n\t}\n\n\treturn translations;\n}\n\nfunction add_second_language_row(value, i) {\n\n\tvar time = new Date().getTime();\n\tvar uniq = Math.floor(time * Math.random());\n\tvar id = \"secondLanguageRow\" + uniq;\n\tvar secondaryLanguageSelectId = \"secondaryLanguageSelect\" + uniq;\n\n\tvar filter_boolean_operator = $('input[name=\"filter_boolean_operator[la][]\"]');\n\tvar filterBooleanOperatorId = \"filter_boolean_operator\" + uniq;\n\tvar filterBooleanOperatorValue = '';\n\n\ti--; // O indíce do método 'each' começa do 0, já o i começa inicia com 1.\n\n\tfilter_boolean_operator.each(function(index, element) {\n\t\tif(index === i) {\n\t\t\tfilterBooleanOperatorValue = $(element).val();\n\t\t\treturn false;\t\t\n\t\t}\t\t\n\t});\n\n\tvar mainLanguageSelect = $('#mainLanguageSelect');\n\tvar clonedName = mainLanguageSelect.attr('name');\n\tvar clonedOptions = Object.values(mainLanguageSelect.selectize()[0].selectize.options);\n\tvar optionsHTML = '';\n\n\tfor (var i = 0; i < clonedOptions.length; i++) {\n\t\toptionsHTML += '<option value=\"' + clonedOptions[i].value + '\">' + clonedOptions[i].text + '</option>';\n\t}\n\n\tvar translations = get_language_filter_translations();\n\n\tvar html = '<div class=\"row row-margin\" id=\"' + id + '\" style=\"display:none;\">\\\n\t\t\t\t\t<div class=\"col-md-1 col-sm-1\">\\\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default\" onclick=\"javascript:remove_second_language_row(' + uniq + ');\" data-uniq=\"' + uniq + '\">\\\n\t\t\t\t\t\t\t<i class=\"glyphicon glyphicon-remove\"></i>\\\n\t\t\t\t\t\t</button>\\\n\t\t\t\t\t</div>\\\n\t\t\t\t\t<div class=\"col-md-5 col-sm-5\">\\\n\t\t\t\t\t\t<select name=\"filter_boolean_operator[la][]\" id=\"'+filterBooleanOperatorId+'\" class=\"form-control\">\\\n\t\t\t\t\t\t\t<option value=\"OR\">OR</option>\\\n\t\t\t\t\t\t\t<option value=\"AND\">AND</option>\\\n\t\t\t\t\t\t</select>\\\n\t\t\t\t\t</div>\\\n\t\t\t\t\t<div class=\"col-md-6 col-sm-6\">\\\n\t\t\t\t\t\t<select name=\"' + clonedName + '\" id=\"' + secondaryLanguageSelectId + '\" placeholder=\"' + translations.mainLanguageSelectPlaceholder + '\" class=\"selectize-input\">\\\n\t\t\t\t\t\t' + optionsHTML + '\\\n\t\t\t\t\t\t</select>\\\n\t\t\t\t\t</div>\\\n\t\t\t\t</div>';\n\n\t$(\"#secondaryLanguageCtt\").append(html);\n\t$('#' + secondaryLanguageSelectId).selectize({\n\t\t'items': [value]\n\t});\n\n\tif(filterBooleanOperatorValue !== '') {\n\t\t$('#' + filterBooleanOperatorId).val(filterBooleanOperatorValue);\t\n\t}\n\n\t$('#' + id).fadeIn('fast');\n}\n\nfunction remove_second_language_row(uniq) {\n\n\t$('#secondLanguageRow' + uniq).fadeOut(\"fast\", function () {\n\t\t$(this).remove();\n\t});\n}\n\nfunction get_languages_checked() {\n\n\tvar languagesChecked = [];\n\n\t$(\"input[id^='la_']\").each(function () {\n\t\tvar t = $(this),\n\t\t\tlanguage = t.val();\n\n\t\tif (t.is(\":checked\")) languagesChecked.push(language);\n\t});\n\n\treturn languagesChecked;\n}\n\nfunction add_languages_checked(languagesChecked) {\n\n\t$(\"#mainLanguageSelect\").selectize()[0].selectize.setValue(languagesChecked[0]);\n\n\t$(\"#secondaryLanguageCtt\").html(null);\n\n\tfor (var i = 1; i < languagesChecked.length; i++) {\n\t\tadd_second_language_row(languagesChecked[i], i);\n\t}\n}\n\nfunction get_subject_area_filter_translations() {\n\n\tvar lang = $(document.language.lang).val();\n\n\tvar translations = {\n\t\tmainThematicTitle: 'ÁREAS SELECIONADAS',\n\t\tmainSubjectAreaSelectPlaceholder: 'Selecione a área temática',\n\t\taddSecondSubjectAreaRowText: 'Adicionar outra área temática +'\n\t};\n\n\tswitch (lang) {\n\n\t\tcase 'en':\n\t\t\ttranslations.mainThematicTitle = 'SELECTED AREAS';\n\t\t\ttranslations.mainSubjectAreaSelectPlaceholder = 'Select the subject area';\n\t\t\ttranslations.addSecondSubjectAreaRowText = 'Add another subject area +';\n\t\t\tbreak;\n\n\t\tcase 'es':\n\t\t\ttranslations.mainThematicTitle = 'ÁREAS SELECCIONADAS';\n\t\t\ttranslations.mainSubjectAreaSelectPlaceholder = 'Seleccione el área temática';\n\t\t\ttranslations.addSecondSubjectAreaRowText = 'Añadir nueva área temática +';\n\t\t\tbreak;\n\t}\n\n\treturn translations;\n}\n\nfunction add_second_subject_area_row(value, i) {\n\n\tvar time = new Date().getTime();\n\tvar uniq = Math.floor(time * Math.random());\n\tvar id = \"secondSubjectAreaRow\" + uniq;\n\tvar secondarySubjectAreaSelectId = \"secondarySubjectAreaSelect\" + uniq;\n\n\tvar filter_boolean_operator = $('input[name=\"filter_boolean_operator[subject_area][]\"]');\n\tvar filterBooleanOperatorId = \"filter_boolean_operator\" + uniq;\n\tvar filterBooleanOperatorValue = '';\n\n\ti--; // O indíce do método 'each' começa do 0, já o i começa inicia com 1.\n\n\tfilter_boolean_operator.each(function(index, element) {\n\t\tif(index === i) {\n\t\t\tfilterBooleanOperatorValue = $(element).val();\n\t\t\treturn false;\t\t\n\t\t}\t\t\n\t});\n\n\tvar mainSubjectAreaSelect = $('#mainSubjectAreaSelect');\n\tvar clonedName = mainSubjectAreaSelect.attr('name');\n\tvar clonedOptions = Object.values(mainSubjectAreaSelect.selectize()[0].selectize.options);\n\tvar optionsHTML = '';\n\n\tvar translations = get_subject_area_filter_translations();\n\n\tfor (var i = 0; i < clonedOptions.length; i++) {\n\t\toptionsHTML += '<option value=\"' + clonedOptions[i].value + '\">' + clonedOptions[i].text + '</option>';\n\t}\n\n\tvar html = '<div class=\"row row-margin\" id=\"' + id + '\" style=\"display:none;\">\\\n\t\t\t\t\t<div class=\"col-md-1 col-sm-1\">\\\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default\" onclick=\"javascript:remove_second_subject_area_row(' + uniq + ');\" data-uniq=\"' + uniq + '\">\\\n\t\t\t\t\t\t\t<i class=\"glyphicon glyphicon-remove\"></i>\\\n\t\t\t\t\t\t</button>\\\n\t\t\t\t\t</div>\\\n\t\t\t\t\t<div class=\"col-md-5 col-sm-5\">\\\n\t\t\t\t\t\t<select name=\"filter_boolean_operator[subject_area][]\" id=\"' + filterBooleanOperatorId + '\" class=\"form-control\">\\\n\t\t\t\t\t\t\t<option value=\"OR\">OR</option>\\\n\t\t\t\t\t\t\t<option value=\"AND\">AND</option>\\\n\t\t\t\t\t\t</select>\\\n\t\t\t\t\t</div>\\\n\t\t\t\t\t<div class=\"col-md-6 col-sm-6\">\\\n\t\t\t\t\t\t<select name=\"' + clonedName + '\" id=\"' + secondarySubjectAreaSelectId + '\" placeholder=\"' + translations.mainSubjectAreaSelectPlaceholder + '\" class=\"selectize-input\">\\\n\t\t\t\t\t\t' + optionsHTML + '\\\n\t\t\t\t\t</select>\\\n\t\t\t\t\t</div>\\\n\t\t\t\t</div>';\n\n\t$(\"#secondarySubjectAreaCtt\").append(html);\n\n\t$('#' + secondarySubjectAreaSelectId).selectize({\n\t\t'items': [value]\n\t});\n\n\tif(filterBooleanOperatorValue !== '') {\n\t\t$('#' + filterBooleanOperatorId).val(filterBooleanOperatorValue);\t\n\t}\n\n\t$('#' + id).fadeIn('fast');\n}\n\nfunction remove_second_subject_area_row(uniq) {\n\n\t$('#secondSubjectAreaRow' + uniq).fadeOut(\"fast\", function () {\n\t\t$(this).remove();\n\t});\n}\n\nfunction get_subject_areas_checked() {\n\n\tvar subjectAreasChecked = [];\n\n\t$(\"input[id^='subject_area_']\").each(function () {\n\t\tvar t = $(this),\n\t\t\tsubjectArea = t.val();\n\n\t\tif (t.is(\":checked\")) subjectAreasChecked.push(subjectArea);\n\t});\n\n\treturn subjectAreasChecked;\n}\n\nfunction add_subject_areas_checked(subjectAreasChecked) {\n\n\t$(\"#mainSubjectAreaSelect\").selectize()[0].selectize.setValue(subjectAreasChecked[0]);\n\n\t$(\"#secondarySubjectAreaCtt\").html(null);\n\n\tfor (var i = 1; i < subjectAreasChecked.length; i++) {\n\t\tadd_second_subject_area_row(subjectAreasChecked[i], i);\n\t}\n}\n\nfunction get_result_total(form_action, form_params, callback){\n\t// query iAHx and return total\n\t$.ajax({\n\t\ttype: 'GET',\n\t\tdata: form_params + '&output=metasearch',\n\t\turl: form_action,\n\t\tsuccess: function(response) { // on success..\n\t\t\ttotal = $(response).find('total').text();\n\t\t\ttotal = parseInt(total);\n\t\t\tcallback(total);\n\t\t}\n\t});\n}\n\n// make a request that only include a query in history\nfunction send_query_to_history(form_action, form_params){\n\t$.ajax({\n\t\ttype: 'GET',\n\t\tdata: form_params,\n\t\turl: form_action,\n\t});\n}\n"]}